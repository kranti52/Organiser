{"changed":false,"filter":false,"title":"LoginController.php","tooltip":"/src/App/Controller/LoginController.php","value":"<?php\n\nnamespace App\\Controller;\n\nuse Silex\\Application;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\HttpFoundation\\JsonResponse;\nuse Symfony\\Component\\HttpFoundation\\RedirectResponse;\nuse Symfony\\Component\\HttpFoundation\\Cookie;\n\nclass LoginController\n{\n    protected $app;\n\n    public function __construct(Application $app)\n    {\n        $this->app = $app;\n    }\n\n    public function Login(Request $request) {\n        $token=$this->app['security']->getToken();\n        if(($token)&& ($this->app['session']->isStarted()) && !$this->app['security.trust_resolver']->isAnonymous($token)) {\n                return $this->app->redirect($this->app[\"url_generator\"]->generate(\"social_login_check\"));\n        }\n        else {\n            \n            return $this->app['twig']->render('index.html',array(\n                    'login_paths' => $this->app['oauth.login_paths'],\n                    'error' => $this->app['security.last_error']($request)\n                ));\n                    \n        }\n    }\n    \n    public function SocialLogin(Request $request) {\n        $service=$this->app['security']->getToken()->getService();\n        $id=$this->app['security']->getToken()->getUid();\n        \n        $send_data=array('service'=>$service,'id'=>$id);\n        $result=$this->app['usecase.social_login']->Login($send_data);\n    \n        return $this->app->redirect($this->app['url_generator']->generate('organise',array('username'=>$result)));\n    }\n    \n    public function Logout(Request $request) {\n        $this->app['usecase.social_login']->Logout();\n        return $this->app->redirect($this->app['url_generator']->generate('login'));\n    }\n}","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":229,"scrollleft":0,"selection":{"start":{"row":21,"column":33},"end":{"row":21,"column":33},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":9,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1439564287850}